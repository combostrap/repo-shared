version: '3'

tasks:
  # Prepare is a Node.js convention command name to lint and correct file
  prepare:
    cmds:
      - |
        git add -A && pre-commit run
  # Update this repo with the copier-template
  # `--vcs-ref HEAD` to avoid `You are downgrading from 0.1.0.post2.dev0+0a9a33e to 0.1.0. Downgrades are not supported.`
  update:
    cmds:
      - |
        copier update --vcs-ref HEAD .
{%- if package_manager == 'maven' %}
  # Install the package locally
  # -DskipTests and not -Dmaven.test.skip so that test packaging is not skipped
  install:
    cmds:
      - mvn install -DskipTests
{%- endif %}
